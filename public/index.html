<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Musical Marble Drop â€” v2</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Passion+One:wght@700&display=block" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #fff;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }
        
        #gameCanvas {
            display: block;
            cursor: grab;
            background: white;
        }
        
        #gameCanvas:active {
            cursor: grabbing;
        }

        .bottom-form-container {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
        }

        .input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }

        #objectInput {
            width: 350px;
            padding: 12px 50px 12px 20px;
            border: 1px solid #dcdcdc;
            border-radius: 999px;
            outline: none;
            background: #fff;
            color: #333;
            font-size: 16px;
        }

        #objectInput::placeholder {
            color: #aaa;
        }

        #generateBtn {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            width: 34px;
            height: 34px;
            background: #f0f0f0;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }

        #generateBtn svg {
            width: 24px;
            height: 24px;
        }

        #generateBtn:hover {
            background-color: #e0e0e0;
        }

        /* Version badge */
        .version-badge {
            position: absolute;
            left: 12px;
            bottom: 12px;
            padding: 6px 10px;
            border-radius: 6px;
            background: rgba(0,0,0,0.65);
            color: #fff;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-size: 12px;
            letter-spacing: 0.2px;
            z-index: 200;
            user-select: none;
        }
        
        .spinner {
            display: none;
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            width: 34px;
            height: 34px;
            box-sizing: border-box;
            border: 3px solid transparent;
            border-top-color: #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: translateY(-50%) rotate(0deg); }
            100% { transform: translateY(-50%) rotate(360deg); }
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    
    <div class="bottom-form-container">
        <div class="input-wrapper">
            <input type="text" id="objectInput" placeholder="Add more stuff...">
            <button id="generateBtn">
                <svg viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 0C32.598 0 42 9.40202 42 21C42 32.598 32.598 42 21 42C9.40202 42 0 32.598 0 21C0 9.40202 9.40202 0 21 0ZM21.9678 10.8848C21.4552 10.3722 20.6249 10.3722 20.1123 10.8848L11.7598 19.2373C11.2472 19.7499 11.2472 20.5802 11.7598 21.0928C12.2723 21.6053 13.1027 21.6053 13.6152 21.0928L19.7275 14.9814V30.1875C19.7275 30.9124 20.3152 31.5 21.04 31.5C21.7649 31.5 22.3525 30.9124 22.3525 30.1875V14.9814L28.4648 21.0928C28.9774 21.6053 29.8077 21.6053 30.3203 21.0928C30.8329 20.5802 30.8329 19.7499 30.3203 19.2373L21.9678 10.8848Z" fill="black" fill-opacity="0.2"/>
                </svg>
            </button>
            <div class="spinner" id="spinner"></div>
        </div>
    
    <!-- Version Badge (for hot-reload verification) -->
    <div id="versionBadge" class="version-badge">v2</div>
    </div>
    
    <!-- Hidden debug/status panel -->
    <div style="display: none;">
        <div id="status"></div>
        <div id="marbleStatus"></div>
        <div id="score"></div>
    </div>

    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    
    <!-- Game Scripts -->
    <script src="/game.js"></script>
</body>
</html>
